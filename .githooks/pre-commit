#!/bin/sh
# Git pre-commit hook para sincronizar requirements.txt automÃ¡ticamente

echo "ğŸ”„ Sincronizando requirements.txt desde Pipfile..."

# Verificar si Pipfile cambiÃ³
if git diff --cached --name-only | grep -q "Pipfile"; then
    echo "ğŸ“¦ Pipfile modificado, actualizando requirements.txt..."
    
    # Generar requirements.txt
    pipenv requirements > requirements.txt 2>/dev/null
    
    if [ $? -eq 0 ]; then
        # Agregar requirements.txt al commit
        git add requirements.txt
        echo "âœ… requirements.txt actualizado y agregado al commit"
    else
        echo "âš ï¸  Error al generar requirements.txt (Â¿Pipenv instalado?)"
    fi
fi

exit 0
